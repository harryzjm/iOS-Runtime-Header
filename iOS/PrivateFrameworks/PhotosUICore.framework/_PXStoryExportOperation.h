//
//     Generated by classdump-c 4.2.0 (64 bit).
//
//  Copyright (C) 1997-2019 Steve Nygard. Updated in 2022 by Kevin Bradley.
//

#import <Foundation/NSOperation.h>

#import <PhotosUICore/PXGEngineDelegate-Protocol.h>
#import <PhotosUICore/PXStoryExportRequest_Internal-Protocol.h>

@class AVAssetReader, AVAssetReaderAudioMixOutput, AVAssetWriter, AVAssetWriterInput, AVAssetWriterInputPixelBufferAdaptor, NSError, NSObject, NSProgress, NSString, NSURL, PXGEngine, PXGPixelBufferMetalRenderDestination, PXMediaProvider, PXStoryExportConfiguration, PXStoryExportVideoOptions, PXStoryModel, PXStoryPacingController, PXStorySongController;
@protocol OS_dispatch_queue, OS_dispatch_semaphore, OS_os_log;

@interface _PXStoryExportOperation : NSOperation <PXGEngineDelegate, PXStoryExportRequest_Internal>
{
    NSObject<OS_dispatch_queue> *_stateQueue;
    long long _stateQueue_status;
    NSError *_stateQueue_error;
    _Bool _stateQueue_hasAudioForExport;
    CDStruct_1b6d18a9 _stateQueue_exportDuration;
    CDStruct_1b6d18a9 _stateQueue_outroDuration;
    NSObject<OS_os_log> *_signpostLog;
    unsigned long long _signpostID;
    NSObject<OS_os_log> *_frequentSignpostLog;
    unsigned long long _frequentSignpostID;
    _Bool _storyQueue_isWaitingForResources;
    NSString *_uniqueIdentifier;
    PXStoryExportConfiguration *_configuration;
    NSURL *_destinationURL;
    NSProgress *_progress;
    PXStoryExportVideoOptions *_videoOptions;
    CDUnknownBlockType _progressHandler;
    NSObject<OS_dispatch_semaphore> *_layoutCompleteSemaphore;
    NSObject<OS_dispatch_semaphore> *_completedWritingVideoFrameSemaphore;
    NSObject<OS_dispatch_queue> *_storyQueue;
    PXGEngine *_storyQueue_engine;
    PXStoryModel *_storyQueue_storyModel;
    PXMediaProvider *_storyQueue_mediaProvider;
    PXStoryPacingController *_storyQueue_pacingController;
    PXStorySongController *_storyQueue_songController;
    PXGPixelBufferMetalRenderDestination *_storyQueue_pixelBufferRenderDestination;
    NSObject<OS_dispatch_queue> *_audioQueue;
    AVAssetReader *_audioQueue_assetReader;
    AVAssetWriterInput *_audioQueue_audioWriter;
    AVAssetReaderAudioMixOutput *_audioQueue_audioMixOutput;
    AVAssetWriter *_assetWriter;
    NSObject<OS_dispatch_queue> *_videoWriterQueue;
    AVAssetWriterInputPixelBufferAdaptor *_videoWriterQueue_pixelBufferWriter;
    CDStruct_1b6d18a9 _videoQueue_firstWrittenStoryTime;
}

- (void).cxx_destruct;
@property(nonatomic) CDStruct_1b6d18a9 videoQueue_firstWrittenStoryTime; // @synthesize videoQueue_firstWrittenStoryTime=_videoQueue_firstWrittenStoryTime;
@property(retain, nonatomic) AVAssetWriterInputPixelBufferAdaptor *videoWriterQueue_pixelBufferWriter; // @synthesize videoWriterQueue_pixelBufferWriter=_videoWriterQueue_pixelBufferWriter;
@property(readonly, nonatomic) NSObject<OS_dispatch_queue> *videoWriterQueue; // @synthesize videoWriterQueue=_videoWriterQueue;
@property(retain) AVAssetWriter *assetWriter; // @synthesize assetWriter=_assetWriter;
@property(retain, nonatomic) AVAssetReaderAudioMixOutput *audioQueue_audioMixOutput; // @synthesize audioQueue_audioMixOutput=_audioQueue_audioMixOutput;
@property(retain, nonatomic) AVAssetWriterInput *audioQueue_audioWriter; // @synthesize audioQueue_audioWriter=_audioQueue_audioWriter;
@property(retain, nonatomic) AVAssetReader *audioQueue_assetReader; // @synthesize audioQueue_assetReader=_audioQueue_assetReader;
@property(readonly, nonatomic) NSObject<OS_dispatch_queue> *audioQueue; // @synthesize audioQueue=_audioQueue;
@property(retain, nonatomic) PXGPixelBufferMetalRenderDestination *storyQueue_pixelBufferRenderDestination; // @synthesize storyQueue_pixelBufferRenderDestination=_storyQueue_pixelBufferRenderDestination;
@property(retain, nonatomic) PXStorySongController *storyQueue_songController; // @synthesize storyQueue_songController=_storyQueue_songController;
@property(retain, nonatomic) PXStoryPacingController *storyQueue_pacingController; // @synthesize storyQueue_pacingController=_storyQueue_pacingController;
@property(retain, nonatomic) PXMediaProvider *storyQueue_mediaProvider; // @synthesize storyQueue_mediaProvider=_storyQueue_mediaProvider;
@property(retain, nonatomic) PXStoryModel *storyQueue_storyModel; // @synthesize storyQueue_storyModel=_storyQueue_storyModel;
@property(retain, nonatomic) PXGEngine *storyQueue_engine; // @synthesize storyQueue_engine=_storyQueue_engine;
@property(readonly, nonatomic) _Bool storyQueue_isWaitingForResources; // @synthesize storyQueue_isWaitingForResources=_storyQueue_isWaitingForResources;
@property(readonly, nonatomic) NSObject<OS_dispatch_queue> *storyQueue; // @synthesize storyQueue=_storyQueue;
@property(readonly, nonatomic) NSObject<OS_dispatch_semaphore> *completedWritingVideoFrameSemaphore; // @synthesize completedWritingVideoFrameSemaphore=_completedWritingVideoFrameSemaphore;
@property(readonly, nonatomic) NSObject<OS_dispatch_semaphore> *layoutCompleteSemaphore; // @synthesize layoutCompleteSemaphore=_layoutCompleteSemaphore;
@property(readonly, nonatomic) CDUnknownBlockType progressHandler; // @synthesize progressHandler=_progressHandler;
@property(readonly, nonatomic) PXStoryExportVideoOptions *videoOptions; // @synthesize videoOptions=_videoOptions;
@property(readonly, nonatomic) NSProgress *progress; // @synthesize progress=_progress;
@property(readonly, nonatomic) NSURL *destinationURL; // @synthesize destinationURL=_destinationURL;
@property(readonly, nonatomic) PXStoryExportConfiguration *configuration; // @synthesize configuration=_configuration;
@property(readonly, nonatomic) NSString *uniqueIdentifier; // @synthesize uniqueIdentifier=_uniqueIdentifier;
- (_Bool)_waitWhileExportingCanContinueForSemaphore:(id)arg1 timeout:(CDStruct_1b6d18a9)arg2;
- (void)collectAnalyticsForExportEnd:(id)arg1;
- (id)collectAnalyticsForExportBegin;
- (void)engineSetNeedsUpdate:(id)arg1;
- (_Bool)engine:(id)arg1 shouldRenderLayout:(id)arg2 sprites:(id)arg3;
- (void)observeValueForKeyPath:(id)arg1 ofObject:(id)arg2 change:(id)arg3 context:(void *)arg4;
- (void)_initializeProgress;
- (void)_audioWriteQueue_cancelAudioExport;
- (void)_audioWriteQueue_exportAudioWithCompletionHandler:(CDUnknownBlockType)arg1;
- (void)_exportAudioWithCompletionHandler:(CDUnknownBlockType)arg1;
- (void)_addAudioInputToAssetWriter:(id)arg1;
- (void)_audioWriteQueue_setupAudioReaderWithAudioExportComposition:(id)arg1 audioMix:(id)arg2;
- (id)_audibleVideoHilightsInStory;
- (void)_addAudioAssetsForVideoHilightsToAudioCompositionBuilder:(id)arg1;
- (void)_handleMediaRequestCompletedForSongAsset:(id)arg1 avAsset:(id)arg2 audioMix:(id)arg3 info:(id)arg4 audioCompositionBuilder:(id)arg5;
- (void)_addSongAssetToAudioCompositionBuilder:(id)arg1;
- (void)_setupAudioExporting;
- (void)_exportVideo;
- (void)_videoWriterQueue_writeVideoWithPixelBuffer:(struct __CVBuffer *)arg1 forStoryTime:(CDStruct_1b6d18a9)arg2;
- (void)_writeVideoWithPixelBuffer:(struct __CVBuffer *)arg1 forStoryTime:(CDStruct_1b6d18a9)arg2;
- (id)pixelBufferAttributes;
- (id)_videoOutputSettings;
- (void)_addVideoInputToAssetWriter:(id)arg1;
- (void)_storyQueue_processRenderedLayoutPixelBuffer:(struct __CVBuffer *)arg1;
- (void)_storyQueue_advanceLayoutToStoryTime:(CDStruct_1b6d18a9)arg1;
- (void)_advanceLayoutToStoryTime:(CDStruct_1b6d18a9)arg1;
- (id)_storyQueue_createStoryModel;
- (void)_setupStoryLayout;
- (_Bool)_waitForStoryStateWhileExportingCanContinueByWatchingChanges:(unsigned long long)arg1 timeout:(CDStruct_1b6d18a9)arg2 verificationBlock:(CDUnknownBlockType)arg3;
- (void)_preloadStoryResourcesAndWaitForBuffering;
- (void)_setupStoryModel;
- (void)_finishWriting;
- (void)_addMetadataToAssetWriter:(id)arg1;
- (void)_setupWriter;
- (void)main;
- (void)_signalSemaphoresForFailedExport;
@property(nonatomic, setter=_setOutroDuration:) CDStruct_1b6d18a9 outroDuration;
@property(nonatomic, setter=_setExportDuration:) CDStruct_1b6d18a9 exportDuration;
@property(nonatomic, setter=_setHasAudioForExport:) _Bool hasAudioForExport;
@property(nonatomic, setter=_setStatus:) long long status;
@property(retain, nonatomic, setter=_setError:) NSError *error;
- (_Bool)shouldContinueExporting;
@property(readonly, nonatomic) _Bool isCancelled;
- (void)cancel;
- (void)dealloc;
- (id)initWithURL:(id)arg1 configuration:(id)arg2 qualityOfService:(long long)arg3 progressHandler:(CDUnknownBlockType)arg4;

// Remaining properties
@property(readonly, copy) NSString *debugDescription;
@property(readonly, copy) NSString *description;
@property(readonly) unsigned long long hash;
@property(readonly) Class superclass;

@end

